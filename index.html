<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MindForge | Auth Portal</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:Arial,sans-serif; }
    body { height:100vh; background:linear-gradient(135deg,#0d0f17,#162033,#0c1624); display:flex; justify-content:center; align-items:center; overflow:hidden; }
    .card { width:400px; background:rgba(255,255,255,0.06); backdrop-filter:blur(12px); border-radius:20px; padding:30px; box-shadow:0 0 40px rgba(0,0,0,0.35); color:#fff; animation:fadeIn 1s ease; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(25px); } to { opacity:1; transform:translateY(0); } }
    h2 { text-align:center; margin-bottom:25px; color:#4ea7ff; }
    .tabs { display:flex; justify-content:center; margin-bottom:20px; }
    .tabs button { background:none; border:none; padding:10px 20px; cursor:pointer; font-size:16px; font-weight:bold; color:#8fbfff; transition:0.3s; }
    .tabs button.active { color:#4ea7ff; border-bottom:2px solid #4ea7ff; }
    .input-group { margin-bottom:18px; }
    .input-group label { font-size:14px; margin-bottom:6px; display:block; }
    .input-group input { width:100%; padding:10px; border-radius:8px; border:none; background:rgba(255,255,255,0.1); color:white; outline:none; font-size:15px; }
    .btn { width:100%; padding:12px; background:#4ea7ff; color:black; border:none; border-radius:8px; font-size:16px; cursor:pointer; margin-top:10px; font-weight:bold; transition:0.3s; }
    .btn:hover { background:#7fc2ff; }
    #signup { display:none; }
  </style>
</head>
<body>

<div class="card">
  <div class="tabs">
    <button class="active" id="loginTab">Login</button>
    <button id="signupTab">Sign Up</button>
  </div>

  <!-- LOGIN FORM -->
  <div id="login">
    <h2>Welcome Back</h2>
    <div class="input-group">
      <label>Email</label>
      <input id="loginEmail" type="email" placeholder="Enter email" />
    </div>
    <div class="input-group">
      <label>Password</label>
      <input id="loginPass" type="password" placeholder="Enter password" />
    </div>
    <button class="btn" id="loginBtn">Login</button>
  </div>

  <!-- SIGNUP FORM -->
  <div id="signup">
    <h2>Create Account</h2>
    <div class="input-group">
      <label>Full Name</label>
      <input id="signupName" type="text" placeholder="Enter full name" />
    </div>
    <div class="input-group">
      <label>Email</label>
      <input id="signupEmail" type="email" placeholder="Enter email" />
    </div>
    <div class="input-group">
      <label>Password</label>
      <input id="signupPass" type="password" placeholder="Create password" />
    </div>
    <button class="btn" id="signupBtn">Sign Up</button>
  </div>
</div>

<!-- Firebase SDKs -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, updateProfile } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAgTiP8_jshNd5iOmypVxiqLpCedlObdg4",
    authDomain: "mindforge-1979.firebaseapp.com",
    projectId: "mindforge-1979",
    storageBucket: "mindforge-1979.firebasestorage.app",
    messagingSenderId: "280491326690",
    appId: "1:280491326690:web:6eddbb68e43c32782472bb"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const loginTab = document.getElementById('loginTab');
  const signupTab = document.getElementById('signupTab');
  const loginDiv = document.getElementById('login');
  const signupDiv = document.getElementById('signup');

  loginTab.addEventListener('click', () => switchTab('login'));
  signupTab.addEventListener('click', () => switchTab('signup'));

  function switchTab(tab) {
    if(tab === 'login') {
      loginDiv.style.display = 'block';
      signupDiv.style.display = 'none';
      loginTab.classList.add('active');
      signupTab.classList.remove('active');
    } else {
      loginDiv.style.display = 'none';
      signupDiv.style.display = 'block';
      signupTab.classList.add('active');
      loginTab.classList.remove('active');
    }
  }

  // SIGNUP
  document.getElementById('signupBtn').addEventListener('click', () => {
    const name  = document.getElementById('signupName').value;
    const email = document.getElementById('signupEmail').value;
    const pass  = document.getElementById('signupPass').value;

    if(!name || !email || !pass) { alert('Please fill in all fields'); return; }

    createUserWithEmailAndPassword(auth, email, pass)
      .then(userCredential => {
        updateProfile(userCredential.user, { displayName: name })
          .then(()=> {
            alert(`Account created for ${name}`);
            // Redirect to dashboard after signup
            window.location.href = 'Dashboard.html';
          });
      })
      .catch(error => { alert(error.message); });
  });

  // LOGIN
  document.getElementById('loginBtn').addEventListener('click', () => {
    const email = document.getElementById('loginEmail').value;
    const pass  = document.getElementById('loginPass').value;

    if(!email || !pass) { alert('Please fill in all fields'); return; }

    signInWithEmailAndPassword(auth, email, pass)
      .then(userCredential => {
        // Successful login â†’ redirect
        window.location.href = 'Dashboard.html';
      })
      .catch(error => { alert(error.message); });
  });

  // Optional: redirect to dashboard if already signed in
  onAuthStateChanged(auth, user => {
    if(user) window.location.href = 'Dashboard.html';
  });
</script>

</body>
</html>
